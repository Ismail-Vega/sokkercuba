import{r as e,j as a,c as s,d as t,f as r,at as i,T as l,F as n,Y as d,Z as u,G as o,h as c,i as m,e as h}from"./vendor-ClnM7L9C.js";import{A as p,v as x,h as j,d as v}from"./index-DQ7WhwzY.js";const y={all:"All",user:"User",players:"Players",juniors:"Juniors",cweek:"Current Week",tsummary:"Training Summary",training:"Team Training History"};function f(){const{state:f,dispatch:b}=e.useContext(p),{username:g}=f,[C,T]=e.useState(""),[W,S]=e.useState("all");return a.jsx(s,{component:"main",maxWidth:"xs",children:a.jsxs(t,{sx:{marginTop:8,display:"flex",alignItems:"center",flexDirection:"column"},children:[a.jsx(r,{sx:{m:1,bgcolor:"secondary.main"},children:a.jsx(i,{})}),a.jsx(l,{component:"h1",variant:"h5",children:"Update your data"}),a.jsxs(n,{fullWidth:!0,sx:{mt:3},children:[a.jsx(d,{id:"update-select-label",children:"Select type"}),a.jsx(u,{value:W,id:"update-select",label:"Update type",onChange:e=>{S(e.target.value)},labelId:"update-select-label",children:Object.keys(y).map((e=>a.jsx(o,{value:e,children:y[e]},e)))})]}),a.jsxs(t,{sx:{mt:1,width:"100%"},children:[a.jsx(n,{fullWidth:!0,children:a.jsx(c,{required:!0,fullWidth:!0,autoFocus:!0,id:"json-input",name:"update",margin:"normal",label:"Paste here",value:C,onChange:e=>{T(e.target.value)}})}),a.jsx(m,{fullWidth:!0,type:"submit",variant:"contained",sx:{mt:3,mb:2},onClick:async e=>{e.preventDefault();const a="all"===W,s=x(C,W),t=a?g:W;if(s){const e={query:`/api/v1/users/${g}`,method:"PATCH",dispatch:b,body:a?s:{[W]:s}},r=await j(e),{error:i,status:l,...n}=r;if(i||200!==l)return;T(""),v(b,{...n}),h(`You have successfully updated your ${t} data into our database`,{variant:"success"})}else h(`Data validation failed, please verify it is a valid ${t} data object`,{variant:"error"})},children:"Save"})]})]})})}export{f as default};
