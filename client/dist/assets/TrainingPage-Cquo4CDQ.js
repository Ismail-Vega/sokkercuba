import{j as e,d as n,ax as i,r as l,F as a,Y as s,Z as t,G as r,X as d,ay as o,az as c,aA as g,aB as h,aC as m,aD as u,aE as p}from"./vendor-ClnM7L9C.js";import{P as f}from"./PageTabs-CGl41YTO.js";import{A as x}from"./index-DQ7WhwzY.js";const b=[{id:"week",label:"Week",minWidth:48},{id:"age",label:"Age",minWidth:48},{id:"stamina",label:"Stam",minWidth:48,align:"center"},{id:"pace",label:"Pace",minWidth:48,align:"center"},{id:"technique",label:"Tech",minWidth:48,align:"center"},{id:"passing",label:"Pass",minWidth:48,align:"center"},{id:"keeper",label:"Keep",minWidth:48,align:"center"},{id:"defending",label:"Def.",minWidth:48,align:"center"},{id:"playmaking",label:"Plmk",minWidth:48,align:"center"},{id:"striker",label:"Strk",minWidth:48,align:"center"},{id:"type",label:"Type",minWidth:48,align:"left"},{id:"pos",label:"Pos.",minWidth:48,align:"left"},{id:"kind",label:"Kind",minWidth:48,align:"left"},{id:"games",label:"Games",minWidth:48,align:"left"},{id:"eff",label:"Eff.",minWidth:48,align:"left"}];const k=["playmaking","striker","keeper","pace","defending","technique","passing"];function y(e){const n={};k.forEach((i=>{const l=e.filter((e=>{const{kind:n,type:l,intensity:a}=e;return i===l.name&&"missing"!==n.name&&a>=50}));if(l.length>=3){const e=l.length,a=l[0].skills[i]-l[e-1].skills[i];if(a>0){const l=e/a;n[i]=parseFloat(l.toFixed(1))}else n[i]=0}else n[i]=0}));const i=Object.values(n),l=i.reduce(((e,n)=>e+n),0);let a=0;return l>0&&(a=l/i.filter((e=>0!==e)).length),n.averageGrowth=parseFloat(a.toFixed(2)),n}function j(){const f=i(),{state:k}=l.useContext(x),{players:j,training:v}=k,[P,W]=l.useState(0),[S,w]=l.useState(25),[R,A]=l.useState((null==j?void 0:j.players[0])||null),[C,E]=l.useState([]),I=(null==j?void 0:j.players)?j.players:[],G=l.useMemo((()=>I.length?I.find((e=>e.info.name.full===(null==R?void 0:R.info.name.full))):null),[R,I]),M=l.useMemo((()=>{var i;const l=(null==v?void 0:v.length)?v.find((e=>e.id===(null==R?void 0:R.id))):null;if(E((null==l?void 0:l.reports)||[]),l&&(null==(i=l.reports)?void 0:i.length)){return l.reports.map((i=>{const{week:l,skills:a,age:s,skillsChange:t,type:r,formation:d,kind:o,games:c,intensity:g,injury:h}=i,m=(null==d?void 0:d.name)||"NA",u=r.name,p="missing"===o.name&&h.daysRemaining>6?"injured":o.name,f=s||(null==R?void 0:R.info.characteristics.age)||0,x=`${c.minutesOfficial}'/${c.minutesFriendly}'/${c.minutesNational}'`,b=(({skills:i,skillsChange:l})=>{const a={};return Object.entries(l).forEach((([l,s])=>{const t=s>0?"#4caf50":s<0?"#f44336":"transparent";a[l]=e.jsx(n,{sx:{backgroundColor:t,borderRadius:"4px"},children:i[l]})})),a})({skills:a,skillsChange:t}),{stamina:k,pace:y,technique:j,passing:v,keeper:P,defending:W,playmaking:S,striker:w}=b;return function(e,n,i,l,a,s,t,r,d,o,c,g,h,m,u){return{week:e,age:n,stamina:i,pace:l,technique:a,passing:s,keeper:t,defending:r,playmaking:d,striker:o,type:c,pos:g,kind:h,games:m,eff:u}}(l,f,k,y,j,v,P,W,S,w,u,m,p,x,g)}))}return null}),[v,R]);return e.jsxs(n,{children:[e.jsxs(n,{sx:{gap:"24px",display:"flex",alignItems:"center"},children:[e.jsxs(a,{sx:{minWidth:210},children:[e.jsx(s,{id:"player-select-label",children:"Players"}),e.jsx(t,{label:"Players",id:"player-select",labelId:"player-select-label",onChange:e=>{const n=I.find((n=>n.info.name.full===e.target.value))||null;A(n)},value:(null==G?void 0:G.info.name.full)||"",inputProps:{MenuProps:{disableScrollLock:!0}},children:I.map((({id:n,info:i})=>e.jsx(r,{value:i.name.full,children:i.name.full},n)))})]}),e.jsxs(n,{sx:{gap:"8px",display:"flex",alignItems:"center"},children:["Gross Talent: ",y(C).averageGrowth]})]}),R&&e.jsx(n,{mt:2,children:e.jsxs(d,{variant:"outlined",sx:{width:"100%",overflow:"hidden"},children:[e.jsx(o,{children:e.jsxs(c,{stickyHeader:!0,"aria-label":"sticky table",children:[e.jsx(g,{children:e.jsx(h,{children:b.map((n=>e.jsx(m,{align:n.align,style:{minWidth:n.minWidth,fontWeight:"bold"},children:n.label},n.id)))})}),e.jsx(u,{children:M&&M.slice(P*S,P*S+S).map((n=>e.jsx(h,{hover:!0,role:"checkbox",tabIndex:-1,children:b.map((i=>{const l="light"===f.palette.mode?"#e0e0e0":"#515151",a="age"===i.id?{borderRight:`1px solid ${l}`}:{},s="type"===i.id?{borderLeft:`1px solid ${l}`}:{},t=n[i.id];return e.jsx(m,{align:i.align,sx:{...s,...a},children:t},i.id)}))},n.week)))})]})}),e.jsx(p,{page:P,component:"div",rowsPerPage:S,count:(null==M?void 0:M.length)||0,onPageChange:(e,n)=>{W(n)},rowsPerPageOptions:[10,25,100],onRowsPerPageChange:e=>{w(+e.target.value),W(0)}})]})})]})}const v=[{label:"MAIN TEAM PROGRESS",children:"MAIN TEAM PROGRESS"},{label:"INDIVIDUAL REPORTS",children:e.jsx(j,{})}];function P(){return e.jsx(f,{tabs:v})}export{P as default};
