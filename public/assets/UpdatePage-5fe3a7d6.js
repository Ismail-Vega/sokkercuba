import{r as a,a as e,d as t,j as s,f as r,g as i,av as l,T as n,F as d,_ as u,$ as o,J as c,i as m,k as h,e as p}from"./vendor-edc92a48.js";import{A as v,v as y,h as f,d as b}from"./index-83e89ab7.js";const g={all:"All",user:"User",players:"Players",juniors:"Juniors",cweek:"Current Week",tsummary:"Training Summary",training:"Team Training History"};function x(){const{state:x,dispatch:j}=a.useContext(v),{username:C}=x,[T,W]=a.useState(""),[k,S]=a.useState("all");return e(t,{component:"main",maxWidth:"xs",children:s(r,{sx:{marginTop:8,display:"flex",alignItems:"center",flexDirection:"column"},children:[e(i,{sx:{m:1,bgcolor:"secondary.main"},children:e(l,{})}),e(n,{component:"h1",variant:"h5",children:"Update your data"}),s(d,{fullWidth:!0,sx:{mt:3},children:[e(u,{id:"update-select-label",children:"Select type"}),e(o,{value:k,id:"update-select",label:"Update type",onChange:a=>{S(a.target.value)},labelId:"update-select-label",children:Object.keys(g).map((a=>e(c,{value:a,children:g[a]},a)))})]}),s(r,{sx:{mt:1,width:"100%"},children:[e(d,{fullWidth:!0,children:e(m,{required:!0,fullWidth:!0,autoFocus:!0,id:"json-input",name:"update",margin:"normal",label:"Paste here",value:T,onChange:a=>{W(a.target.value)}})}),e(h,{fullWidth:!0,type:"submit",variant:"contained",sx:{mt:3,mb:2},onClick:async a=>{a.preventDefault();const e="all"===k,t=y(T,k),s=e?C:k;if(t){const a={query:`/api/v1/users/${C}`,method:"PATCH",dispatch:j,body:e?t:{[k]:t}},r=await f(a),{error:i,status:l,...n}=r;if(i||200!==l)return;W(""),b(j,{...n}),p(`You have successfully updated your ${s} data into our database`,{variant:"success"})}else p(`Data validation failed, please verify it is a valid ${s} data object`,{variant:"error"})},children:"Save"})]})]})})}export{x as default};
