import{r as a,x as e,a as t,a5 as n,d as s,j as i,f as o,g as r,ag as l,T as d,F as c,i as m,ah as p,I as u,ai as h,aj as g,ak as b,al as f,k as y,am as x,D as w}from"./vendor-edc92a48.js";import{A as v,h as k,s as C,a as D,b as S,c as I}from"./index-83e89ab7.js";function T(){const{state:T,dispatch:W}=a.useContext(v),{loggedIn:j}=T,q=e(),[P,E]=a.useState(!1),[F,A]=a.useState(!1);if(j)return t(n,{to:"/"});return t(s,{component:"main",maxWidth:"xs",children:i(o,{sx:{marginTop:8,display:"flex",alignItems:"center",flexDirection:"column"},children:[t(r,{sx:{m:1,bgcolor:"secondary.main"},children:t(l,{})}),t(d,{component:"h1",variant:"h5",children:"Sign in"}),i(o,{component:"form",onSubmit:async a=>{a.preventDefault();const e=new FormData(a.currentTarget),t=e.get("email"),n=e.get("password"),s={query:"/api/auth/login",method:"POST",dispatch:W,body:{email:t,password:n}},i=await k(s),{success:o,teamId:r,accessToken:l,status:d}=i;if(200===d&&o&&(C(W,!0),D(W,t),r&&l)){S(W,r);const a={query:`/api/v1/teams/${r}`,method:"GET",dispatch:W,headers:{authorization:`Bearer ${l}`}},{data:e,success:t}=await k(a);e&&t&&I(W,{...e})}},sx:{mt:1,width:"100%"},children:[i(c,{fullWidth:!0,children:[t(m,{required:!0,fullWidth:!0,autoFocus:!0,id:"email",name:"email",margin:"normal",label:"Email",autoComplete:"Email",inputProps:{type:"email"}}),t(m,{required:!0,fullWidth:!0,id:"password",margin:"normal",name:"password",label:"Password",autoComplete:"password",type:F?"text":"password",sx:{backgroundColor:"rgb(232,240,254)"},InputProps:{endAdornment:t(p,{position:"end",children:t(u,{edge:"end",onClick:()=>A((a=>!a)),onMouseDown:a=>{a.preventDefault()},"aria-label":"toggle password visibility",children:t(F?h:g,{})})})}}),t(b,{label:"Remember me",control:t(f,{color:"primary",checked:P,onChange:a=>{E(a.target.checked)}})})]}),t(y,{fullWidth:!0,type:"submit",variant:"contained",sx:{mt:3,mb:2},children:"Sign In"})]}),t(x,{container:!0,children:i(x,{item:!0,typography:"body2",children:["Don't have an account?"," ",t(w,{variant:"body1",component:"button",onClick:()=>q("/signup"),children:"Sign Up"})]})})]})})}export{T as default};
