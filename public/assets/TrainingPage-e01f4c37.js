import{a as e,f as n,az as i,r as l,j as a,F as t,_ as s,$ as r,J as d,Z as o,aA as c,aB as g,aC as h,aD as m,aE as u,aF as p,aG as f}from"./vendor-edc92a48.js";import{P as b}from"./PageTabs-27593840.js";import{A as k}from"./index-83e89ab7.js";const y=[{id:"week",label:"Week",minWidth:48},{id:"age",label:"Age",minWidth:48},{id:"stamina",label:"Stam",minWidth:48,align:"center"},{id:"pace",label:"Pace",minWidth:48,align:"center"},{id:"technique",label:"Tech",minWidth:48,align:"center"},{id:"passing",label:"Pass",minWidth:48,align:"center"},{id:"keeper",label:"Keep",minWidth:48,align:"center"},{id:"defending",label:"Def.",minWidth:48,align:"center"},{id:"playmaking",label:"Plmk",minWidth:48,align:"center"},{id:"striker",label:"Strk",minWidth:48,align:"center"},{id:"type",label:"Type",minWidth:48,align:"left"},{id:"pos",label:"Pos.",minWidth:48,align:"left"},{id:"kind",label:"Kind",minWidth:48,align:"left"},{id:"games",label:"Games",minWidth:48,align:"left"},{id:"eff",label:"Eff.",minWidth:48,align:"left"}];const v=["playmaking","striker","keeper","pace","defending","technique","passing"];function x(e){const n={};v.forEach((i=>{const l=e.filter((e=>{const{kind:n,type:l,intensity:a}=e;return i===l.name&&"missing"!==n.name&&a>=50}));if(l.length>=3){const e=l.length,a=l[0].skills[i]-l[e-1].skills[i];if(a>0){const l=e/a;n[i]=parseFloat(l.toFixed(1))}else n[i]=0}else n[i]=0}));const i=Object.values(n),l=i.reduce(((e,n)=>e+n),0);let a=0;return l>0&&(a=l/i.filter((e=>0!==e)).length),n.averageGrowth=parseFloat(a.toFixed(2)),n}function P(){const b=i(),{state:v}=l.useContext(k),{players:P,training:W}=v,[S,w]=l.useState(0),[R,A]=l.useState(25),[C,E]=l.useState((null==P?void 0:P.players[0])||null),[I,j]=l.useState([]),F=(null==P?void 0:P.players)?P.players:[],G=l.useMemo((()=>F.length?F.find((e=>e.info.name.full===(null==C?void 0:C.info.name.full))):null),[C,F]),M=l.useMemo((()=>{var i;const l=(null==W?void 0:W.length)?W.find((e=>e.id===(null==C?void 0:C.id))):null;if(j((null==l?void 0:l.reports)||[]),l&&(null==(i=l.reports)?void 0:i.length)){return l.reports.map((i=>{const{week:l,skills:a,age:t,skillsChange:s,type:r,formation:d,kind:o,games:c,intensity:g,injury:h}=i,m=(null==d?void 0:d.name)||"NA",u=r.name,p="missing"===o.name&&h.daysRemaining>6?"injured":o.name,f=t||(null==C?void 0:C.info.characteristics.age)||0,b=`${c.minutesOfficial}'/${c.minutesFriendly}'/${c.minutesNational}'`,k=(({skills:i,skillsChange:l})=>{const a={};return Object.entries(l).forEach((([l,t])=>{const s=t>0?"#4caf50":t<0?"#f44336":"transparent";a[l]=e(n,{sx:{backgroundColor:s,borderRadius:"4px"},children:i[l]})})),a})({skills:a,skillsChange:s}),{stamina:y,pace:v,technique:x,passing:P,keeper:W,defending:S,playmaking:w,striker:R}=k;return function(e,n,i,l,a,t,s,r,d,o,c,g,h,m,u){return{week:e,age:n,stamina:i,pace:l,technique:a,passing:t,keeper:s,defending:r,playmaking:d,striker:o,type:c,pos:g,kind:h,games:m,eff:u}}(l,f,y,v,x,P,W,S,w,R,u,m,p,b,g)}))}return null}),[W,C]);return a(n,{children:[a(n,{sx:{gap:"24px",display:"flex",alignItems:"center"},children:[a(t,{sx:{minWidth:210},children:[e(s,{id:"player-select-label",children:"Players"}),e(r,{label:"Players",id:"player-select",labelId:"player-select-label",onChange:e=>{const n=F.find((n=>n.info.name.full===e.target.value))||null;E(n)},value:(null==G?void 0:G.info.name.full)||"",inputProps:{MenuProps:{disableScrollLock:!0}},children:F.map((({id:n,info:i})=>e(d,{value:i.name.full,children:i.name.full},n)))})]}),a(n,{sx:{gap:"8px",display:"flex",alignItems:"center"},children:["Gross Talent: ",x(I).averageGrowth]})]}),C&&e(n,{mt:2,children:a(o,{variant:"outlined",sx:{width:"100%",overflow:"hidden"},children:[e(c,{children:a(g,{stickyHeader:!0,"aria-label":"sticky table",children:[e(h,{children:e(m,{children:y.map((n=>e(u,{align:n.align,style:{minWidth:n.minWidth,fontWeight:"bold"},children:n.label},n.id)))})}),e(p,{children:M&&M.slice(S*R,S*R+R).map((n=>e(m,{hover:!0,role:"checkbox",tabIndex:-1,children:y.map((i=>{const l="light"===b.palette.mode?"#e0e0e0":"#515151",a="age"===i.id?{borderRight:`1px solid ${l}`}:{},t="type"===i.id?{borderLeft:`1px solid ${l}`}:{},s=n[i.id];return e(u,{align:i.align,sx:{...t,...a},children:s},i.id)}))},n.week)))})]})}),e(f,{page:S,component:"div",rowsPerPage:R,count:(null==M?void 0:M.length)||0,onPageChange:(e,n)=>{w(n)},rowsPerPageOptions:[10,25,100],onRowsPerPageChange:e=>{A(+e.target.value),w(0)}})]})})]})}const W=[{label:"MAIN TEAM PROGRESS",children:"MAIN TEAM PROGRESS"},{label:"INDIVIDUAL REPORTS",children:e(P,{})}];function S(){return e(b,{tabs:W})}export{S as default};
